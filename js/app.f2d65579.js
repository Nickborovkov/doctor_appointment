(function(t){function e(e){for(var r,o,i=e[0],u=e[1],c=e[2],d=0,p=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&p.push(s[o][0]),s[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);l&&l(e);while(p.length)p.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,i=1;i<n.length;i++){var u=n[i];0!==s[u]&&(r=!1)}r&&(a.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},s={app:0},a=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/doctor_appointment/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var l=u;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},4533:function(t,e,n){"use strict";n("945d")},5561:function(t,e,n){t.exports=n.p+"img/appLogo.b046dd8d.png"},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",{staticClass:"mt-5",on:{click:function(e){t.hintsActive=!1}}},[r("b-row",{staticClass:"justify-content-center"},[r("b-col",{attrs:{xs:"12",md:"6"}},[r("b-card",{attrs:{tag:"div"}},[r("div",{staticStyle:{display:"flex","justify-content":"center"}},[r("h3",{staticStyle:{"text-align":"center","margin-right":"10px"}},[t._v("Вызов врача на дом")]),r("div",{staticStyle:{width:"40px"}},[r("img",{staticStyle:{width:"100%"},attrs:{src:n("5561"),alt:"appLogo"}})]),r("hr",{staticClass:"mb-5"})]),r("b-form",[r("div",{staticClass:"inputBlock"},[r("p",[t._v("Введите имя:")]),r("b-form-input",{staticClass:"mb-3",attrs:{id:"fullName",type:"text"},on:{blur:function(e){return t.$v.fullName.$touch()}},model:{value:t.$v.fullName.$model,callback:function(e){t.$set(t.$v.fullName,"$model",e)},expression:"$v.fullName.$model"}}),!t.$v.fullName.required&&t.$v.fullName.$dirty?r("p",{staticClass:"error"},[t._v(" Поле обязательно ")]):t._e(),!t.$v.fullName.fullNameRegex&&t.$v.fullName.$dirty?r("p",{staticClass:"error"},[t._v(" Введите полное ФИО, цифры недопустимы ")]):t._e()],1),r("div",{staticClass:"inputBlock"},[r("p",[t._v("Введите адрес:")]),r("b-form-input",{staticClass:"mb-3",attrs:{id:"address",type:"text",placeholder:"Выберите из списка подсказок"},on:{blur:function(e){return t.$v.address.$touch()},input:function(e){t.hintsActive=!0},keydown:function(e){return t.showAddressSuggestions(t.address)},click:function(e){e.stopPropagation(),t.hintsActive=!0}},model:{value:t.$v.address.$model,callback:function(e){t.$set(t.$v.address,"$model",e)},expression:"$v.address.$model"}}),!t.$v.address.required&&t.$v.address.$dirty?r("p",{staticClass:"error"},[t._v(" Поле обязательно, выберите адрес из списка подсказок ")]):t._e()],1),t.hintsActive?r("div",{staticClass:"hintsHolder"},[t.getIsLoading?r("div",{staticStyle:{display:"flex","justify-content":"center"}},[r("b-spinner",{attrs:{variant:"info"}})],1):t.getIsLoading||t.getErorr?t._e():r("div",t._l(t.getAddressSuggestions,(function(e){return r("p",{key:e.value,staticClass:"hintItem",on:{click:function(n){return t.chooseAddress(e.value,e)}}},[t._v(" "+t._s(e.value)+" ")])})),0)]):t._e(),r("div",{staticClass:"inputBlock"},[r("p",[t._v("Выберите дату:")]),r("b-form-input",{staticClass:"mb-3",attrs:{id:"appointmentDate",type:"date",min:t.dateToday,max:t.dateAfterTwoWeeks},on:{blur:function(e){return t.$v.appointmentDate.$touch()}},model:{value:t.$v.appointmentDate.$model,callback:function(e){t.$set(t.$v.appointmentDate,"$model",e)},expression:"$v.appointmentDate.$model"}}),!t.$v.appointmentDate.required&&t.$v.appointmentDate.$dirty?r("p",{staticClass:"error"},[t._v(" Поле обязательно ")]):t._e()],1),r("b-button-group",{staticStyle:{display:"flex","justify-content":"center"}},[r("b-button",{staticClass:"mt-3",attrs:{variant:"info",disabled:!t.$v.fullName.fullNameRegex||!t.$v.fullName.required||!t.$v.address.required||!t.$v.appointmentDate.required||!t.addressFromList},on:{click:t.setAppointment}},[t._v(" Записаться ")]),r("b-button",{staticClass:"mt-3",attrs:{variant:"danger"},on:{click:t.clearForm}},[t._v(" Очистить ")])],1)],1)],1)],1)],1),r("ModalWindow",{attrs:{fullName:t.fullName,address:t.address,appointmentDate:t.appointmentDate,clearForm:t.clearForm,resultString:t.resultInfo}})],1)},a=[],o=(n("99af"),function(){var t=new Date,e=String(t.getFullYear()),n=String(t.getMonth()+1),r=1===String(t.getDate()).length?"0"+t.getDate():t.getDate();return"".concat(e,"-").concat(n,"-").concat(r)}),i=function(){var t=new Date(Date.now()+12096e5),e=String(t.getFullYear()),n=String(t.getMonth()+1),r=1===String(t.getDate()).length?"0"+t.getDate():t.getDate();return"".concat(e,"-").concat(n,"-").concat(r)},u=n("b5ae"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{attrs:{id:"responseModal","hide-header":"","hide-footer":"","ok-only":""}},[n("h3",[t._v("Вы успешно вызвали врача")]),n("hr"),n("h4",[t._v("Информация о вызове:")]),n("p",{staticClass:"my-4"},[t._v("Имя:"),n("span",{staticStyle:{color:"#5bc0de"}},[t._v(" "+t._s(t.fullName))])]),n("p",{staticClass:"my-4"},[t._v("Адрес:"),n("span",{staticStyle:{color:"#5bc0de"}},[t._v(" "+t._s(t.address))])]),n("p",{staticClass:"my-4"},[t._v("Дата:"),n("span",{staticStyle:{color:"#5bc0de"}},[t._v(" "+t._s(t.reverseDate))])]),n("h4",[t._v("Сервисная информация:")]),n("p",{staticClass:"my-4"},[t._v(t._s(t.resultString))]),n("b-button",{staticStyle:{width:"100%"},attrs:{variant:"info"},on:{click:t.confirmAppointment}},[t._v("Готово")])],1)},l=[],d=(n("a15b"),n("ac1f"),n("1276"),{name:"ModalWindow",props:{fullName:String,address:String,appointmentDate:String,clearForm:Function,resultString:String},computed:{reverseDate:function(){return this.appointmentDate.split("-").reverse().join(".")}},methods:{confirmAppointment:function(){this.$bvModal.hide("responseModal"),this.clearForm()}}}),p=d,g=n("2877"),f=Object(g["a"])(p,c,l,!1,null,null,null),m=f.exports,v=(n("d81d"),{"Ё":"YO","Й":"I","Ц":"TS","У":"U","К":"K","Е":"E","Н":"N","Г":"G","Ш":"SH","Щ":"SCH","З":"Z","Х":"H","Ъ":"'","ё":"yo","й":"i","ц":"ts","у":"u","к":"k","е":"e","н":"n","г":"g","ш":"sh","щ":"sch","з":"z","х":"h","ъ":"'","Ф":"F","Ы":"I","В":"V","А":"a","П":"P","Р":"R","О":"O","Л":"L","Д":"D","Ж":"ZH","Э":"E","ф":"f","ы":"i","в":"v","а":"a","п":"p","р":"r","о":"o","л":"l","д":"d","ж":"zh","э":"e","Я":"Ya","Ч":"CH","С":"S","М":"M","И":"I","Т":"T","Ь":"'","Б":"B","Ю":"YU","я":"ya","ч":"ch","с":"s","м":"m","и":"i","т":"t","ь":"'","б":"b","ю":"yu"}),h=function(t){return t.split("").map((function(t){return v[t]||t})).join("").toUpperCase()},b=function(t){var e=t.split(" "),n="".concat(e[0][0]).concat(e[1][0]).concat(e[2][0]);return n},S=function(t){switch(t){case"Россия":return"Russia";case"Украина":return"Ukraine";case"Беларусь":return"Belarus";case"Казахстан":return"Kazakhstan"}},$=u["helpers"].regex("fullNameRegex",/^(([а-яА-ЯёЁ\s]+|[a-zA-Z\s]+){2})+ (([а-яА-ЯёЁ\s]+|[a-zA-Z\s]+){2})+ (([а-яА-ЯёЁ\s]+|[a-zA-Z\s]+){2})+$/),y={name:"App",data:function(){return{fullName:"",address:"",appointmentDate:"",modalWindow:!1,hintsActive:!1,resultInfo:"",addressFromList:!1}},computed:{dateToday:function(){return o()},dateAfterTwoWeeks:function(){return i()},getAddressSuggestions:function(){return this.$store.getters.getAddressSuggestions},getIsLoading:function(){return this.$store.getters.getIsLoading},getErorr:function(){return this.$store.getters.getError},getCurrSuggestion:function(){return this.$store.getters.getCurrentSuggestion}},methods:{showAddressSuggestions:function(t){this.$store.dispatch("getAddressSuggestions",t)},chooseAddress:function(t,e){this.address=t,this.hintsActive=!1,this.$store.commit("setCurrentSuggestion",e),this.addressFromList=!0},setAppointment:function(){this.buildResultString(),this.$bvModal.show("responseModal")},clearForm:function(){this.fullName="",this.address="",this.appointmentDate="",this.$v.$reset(),this.addressFromList=!1},buildResultString:function(){this.resultInfo=S(this.getCurrSuggestion.data.country)+"/"+this.getCurrSuggestion.data.region_iso_code+"/"+h(b(this.fullName))+"/GLAT"+this.getCurrSuggestion.data.geo_lat+"-GLON"+this.getCurrSuggestion.data.geo_lon+"/"+this.appointmentDate}},validations:{fullName:{required:u["required"],fullNameRegex:$},address:{required:u["required"]},appointmentDate:{required:u["required"]}},components:{ModalWindow:m}},_=y,C=(n("4533"),Object(g["a"])(_,s,a,!1,null,"2f512c54",null)),w=C.exports,A=n("5f5b"),x=n("1dce"),D=n.n(x),k=n("bc3a"),N=n.n(k),L=n("1da1"),j=(n("96cf"),n("b0c0"),n("2f62")),O=N.a.create({baseURL:"https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/address",headers:{Authorization:"Token 3d8dc7d5eff3c5f99b0bbcd21d6aa76ea8d0278c","Content-Type":"application/json",Accept:"application/json"}}),q={requestAddresses:function(t){return O.post("",{query:t,count:10})}};r["default"].use(j["a"]);var I=new j["a"].Store({state:{addressSuggestions:null,currentSuggestion:null,isLoading:!1,error:null},mutations:{setAddressSuggestions:function(t,e){t.addressSuggestions=e},setCurrentSuggestion:function(t,e){t.currentSuggestion=e},setIsLoading:function(t,e){t.isLoading=e},setError:function(t,e){t.error=e}},actions:{getAddressSuggestions:function(t,e){return Object(L["a"])(regeneratorRuntime.mark((function n(){var r,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.commit,n.prev=1,r("setError",null),r("setIsLoading",!0),n.next=6,q.requestAddresses(e);case 6:s=n.sent,s.data.suggestions.length>0?r("setAddressSuggestions",s.data.suggestions):r("setError","no results"),r("setIsLoading",!1),n.next=14;break;case 11:n.prev=11,n.t0=n["catch"](1),r("setError",n.t0.name);case 14:case"end":return n.stop()}}),n,null,[[1,11]])})))()}},getters:{getAddressSuggestions:function(t){return t.addressSuggestions},getCurrentSuggestion:function(t){return t.currentSuggestion},getIsLoading:function(t){return t.isLoading},getError:function(t){return t.error}}});n("f9e3"),n("2dd8");r["default"].use(A["a"]),r["default"].use(D.a),r["default"].config.productionTip=!1,new r["default"]({store:I,axios:N.a,render:function(t){return t(w)}}).$mount("#app")},"945d":function(t,e,n){}});
//# sourceMappingURL=app.f2d65579.js.map